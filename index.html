<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Message</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0b0b12">

  <link rel="preload" href="MAA%20KALI.png" as="image" fetchpriority="high">
  <link rel="preload" href="shankh.jpg" as="image">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      min-height: 100vh;
      min-height: 100svh;
      font-family: 'Segoe UI', system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      color: #ffffff;
      position: relative;
      background: #0b0b12;
      overflow-x: hidden;
    }

    /* Background images */
    .bg-img, .bg-cover {
      position: fixed; inset: 0;
      width: 100vw; height: 100vh; height: 100svh;
      pointer-events: none;
    }
    .bg-img {
      z-index: -1;
      object-fit: contain;
      object-position: center;
    }
    .bg-cover {
      z-index: -2;
      object-fit: cover;
      object-position: center;
      filter: blur(28px) brightness(.85) saturate(1.05);
      transform: scale(1.08);
    }
    body::after {
      content: "";
      position: fixed; inset: 0; z-index: -1;
      pointer-events: none;
      background: radial-gradient(115% 80% at 50% 30%, transparent 0 55%, rgba(0,0,0,.42) 70%, rgba(0,0,0,.75) 100%);
    }

    /* Message container */
    .message-box, .ps-box {
      background: rgba(255, 255, 255, 0.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      max-width: 680px;
      width: min(680px, 92vw);
      text-align: center;
      margin-bottom: 30px;
      border: 1px solid rgba(255,255,255,.25);
    }

    /* Lines and PS text: wrap only at spaces, never split words */
    .line, .ps-box p {
      margin: 15px 0;
      opacity: 0;
      white-space: normal;
      word-break: keep-all;       /* no mid-word breaks */
      overflow-wrap: normal;      /* wrap only at spaces */
      -webkit-hyphens: none;
      -ms-hyphens: none;
      hyphens: none;
      font-size: clamp(1em, 4vw, 1.5em); /* auto-scale text for small screens */
    }

    .ps-box {
      font-style: italic;
      opacity: 0;
    }

    /* Character animations */
    .ch { opacity:0; display:inline-block; animation: charIn .4s ease forwards; }
    .ch.sp { width:.35em; }
    @keyframes charIn {
      from { opacity:0; transform: translateY(8px); }
      to { opacity:1; transform: translateY(0); }
    }

    /* Popup styling */
    #popup {
      position: fixed; inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
    }
    #popup .box {
      position: relative;
      max-width: 520px;
      width: 92%;
      color: #fff;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,.45);
      box-shadow: 0 0 18px rgba(0,0,0,0.55);
      background: rgba(0,0,0,.2);
    }
    #popup h3 { margin-bottom: 10px; font-size: 1.2em; text-shadow: 0 2px 6px rgba(0,0,0,.6); }
    #popup p { font-size: 0.95em; margin-bottom: 20px; text-shadow: 0 2px 6px rgba(0,0,0,.6); }
    #popup button { padding: 10px 15px; margin: 0 10px; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; }
    #denyBtn { background: rgba(255,255,255,.9); color: #222; }
    #allowBtn { background: #0f172a; color: #fff; border:1px solid rgba(255,255,255,.4); }

    .popup-hero { position: relative; width: 100%; aspect-ratio: 3 / 2; overflow: hidden; }
    .popup-hero::before {
      content: "";
      position: absolute; inset: 0;
      background: url('shankh.jpg') center / cover no-repeat;
      filter: blur(14px) brightness(.9) saturate(1.05);
      transform: scale(1.08);
    }
    .popup-img { position: relative; width: 100%; height: 100%; object-fit: contain; display: block; }
    .popup-body { padding: 18px 18px 16px; text-align: center; }
  </style>
</head>
<body>
  <!-- Background layers -->
  <img class="bg-cover" src="MAA%20KALI.png?v=1" alt="BG Fill" decoding="async" loading="eager" fetchpriority="high">
  <img class="bg-img" src="MAA%20KALI.png?v=1" alt="Maa Kali Background" decoding="async" loading="eager" fetchpriority="high">

  <!-- Message lines -->
  <div class="message-box" id="messageBox">
    <div class="line">WAIT , A SEC</div>
    <div class="line">HOW IS LIFE?</div>
    <div class="line">YOU JUST ENDED A CHAPTER OF LIFE,</div>
    <div class="line">BUT WHOLE BOOK IS STILL THERE,</div>
    <div class="line">WELL THINK IT LIKE</div>
    <div class="line">INTRODUCTION OF A STORY BOOK</div>
    <div class="line">NOT THE FULL STORY,</div>
    <div class="line">WRITE YOUR OWN STORY WITH OWN PERSPECTIVE</div>
    <div class="line">DON'T WORRY EVERYTHING IS FINE......</div>
  </div>

  <!-- PS -->
  <div class="ps-box" id="psBox">
    <p>PS: TUJHE BOLATHA SUNANAHIüò§ HOGAYA KAND AB HUMü´† KYA KARE RADHE RADHEüôè....</p>
  </div>

  <!-- Audio & popup -->
  <audio id="bg-music" loop muted playsinline style="display:none;">
    <source src="SHANKHRADHE.mp3" type="audio/mpeg">
    Your browser doesn't support audio playback.
  </audio>

  <div id="popup">
    <div class="box">
      <div class="popup-hero">
        <img class="popup-img" src="shankh.jpg" alt="Shankh">
      </div>
      <div class="popup-body">
        <h3>Here for you, and don't worry</h3>
        <p>Do you want to play audio too?</p>
        <div>
          <button id="denyBtn">Deny</button>
          <button id="allowBtn">Okay</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const audio = document.getElementById('bg-music');
    const popup = document.getElementById('popup');
    const denyBtn = document.getElementById('denyBtn');
    const allowBtn = document.getElementById('allowBtn');
    const psBox = document.getElementById('psBox');

    // Letter-by-letter animation
    function startLetterAnimation(){
      const per = 0.07;
      let base = 0;

      const letterize = (el, baseDelay) => {
        const rawChars = Array.from(el.textContent);
        el.textContent = '';
        let delay = baseDelay;
        for (const ch of rawChars){
          const span = document.createElement('span');
          span.className = 'ch' + (ch === ' ' ? ' sp' : '');
          span.innerHTML = (ch === ' ') ? '&nbsp;' : ch;
          span.style.animationDelay = delay + 's';
          el.appendChild(span);
          delay += per;
        }
        el.style.visibility = 'visible';
        el.style.opacity = '1';
        el.style.transform = 'none';
        return delay - baseDelay;
      };

      document.querySelectorAll('.line').forEach((line) => {
        const added = letterize(line, base);
        base += added + 0.5;
      });

      const psP = document.querySelector('#psBox p');
      if (psP) {
        psBox.style.visibility = 'visible';
        psBox.style.opacity = '1';
        psBox.style.transform = 'none';
        letterize(psP, base);
      }
    }

    function handlePopupClosed() {
      startLetterAnimation();
      popup.style.display = 'none';
    }

    function startMusicOnInteraction() {
      audio.muted = false;
      audio.play().catch(err => console.log('Audio error:', err));
      window.removeEventListener('click', startMusicOnInteraction);
      window.removeEventListener('touchstart', startMusicOnInteraction);
    }

    // Popup buttons
    denyBtn.addEventListener('click', (event) => {
      event.stopPropagation();
      handlePopupClosed();
      audio.pause();
      audio.muted = true;
    });

    allowBtn.addEventListener('click', (event) => {
      event.stopPropagation();
      handlePopupClosed();
      audio.muted = false;
      audio.play().catch(err => console.log('Audio error:', err));
    });

    // Show popup initially, hide text until choice
    document.addEventListener('DOMContentLoaded', () => {
      popup.style.display = 'flex';
      document.querySelectorAll('.line').forEach(line => {
        line.style.visibility = 'hidden';
      });
      psBox.style.visibility = 'hidden';
    });

    // Fallback: unlock audio on first interaction
    window.addEventListener('click', startMusicOnInteraction, { once: true });
    window.addEventListener('touchstart', startMusicOnInteraction, { once: true });
  </script>

  <noscript>
    <style> .line, .ps-box { opacity:1 !important; transform:none !important } </style>
  </noscript>
</body>
</html>
